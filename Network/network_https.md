> [ν•΄λ‹Ή ν¬μ¤ν…](https://hello-judy-world.tistory.com/201)μ—μ„λ„ λ‚΄μ©μ„ ν™•μΈν•  μ μμµλ‹λ‹¤.

> written by [judy](https://github.com/ParkJungYoon)

μ°λ¦¬λ” μ›ΉμΌλ΅ λ§μ€ μΌμ„ ν•  μ μλ‹¤. κ·Έ μ¤‘ μ›Ή μ‚¬μ΄νΈμ—μ„ μ‹ μ©μΉ΄λ“λ΅ λ¬Όκ±΄μ„ κµ¬λ§¤ν• κ²½ν—μ΄ μμ„κ²ƒμ΄λ‹¤.

μ΄λ• μ°λ¦¬μ λΈλΌμ°μ €μ™€ μ„λ²„ κ°„μ ν†µμ‹ μ€ κ±°μ ν™•μ‹¤ν•κ² TLS μ„μ—μ„ μ‚¬μ©ν•κ³  μμ„ κ²ƒμ΄λ‹¤. (URLμ΄ https:λ΅ μ‹μ‘ν•λ‹¤λ©΄ TLSλ¥Ό μ‚¬μ©ν•κ³  μλ” κ²ƒμ΄λ‹¤.)

κΈμµ μ •λ³΄λ‚ λ©”μΌ λ“± μ¤‘μ”ν• μ •λ³΄λ¥Ό λ³΄νΈν•κΈ° μ„ν•΄μ„ κ°€μ¥ κΈ°λ³Έμ μΈ κΈ°μ μ΄ **HTTPS**λΌκ³  ν•  μ μλ‹¤.

μ§€κΈλ¶€ν„° HTTPSμ— λ€ν•΄μ„ μ•μ•„λ³΄μ.

<br>

# π”’  HTTPS (Hypertext Transfer Protocol Secure)

> μΈν„°λ„· μƒμ—μ„ μ •λ³΄λ¥Ό **μ•”νΈν™”**ν•λ” `TLS ν”„λ΅ν† μ½`μ„ μ‚¬μ©ν•΄ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ μμ›μ„ μ£Όκ³  λ°›μ„ λ• μ“°λ” ν†µμ‹  κ·μ•½

HTTPλ” ν‰λ¬Έ ν…μ¤νΈ, μ¦‰ μ•”νΈν™”λμ§€ μ•μ€ ν…μ¤νΈλ¥Ό μ „μ†΅ν•λ” TCP ν”„λ΅ν† μ½μ μΌμΆ…μ΄λ‹¤. μ—¬κΈ°μ— S(Secure)λ¥Ό λ”ν• κ²ƒμ΄ HTTPSμ΄λ‹¤.

μ•μ „ν• κ³„μΈµμ„ μ¶”κ°€ν•κΈ° μ„ν•΄ μ›Ή μ„λ²„μ— μ„¤μΉν•λ” κ²ƒμ΄ SSL/TLS μΈμ¦μ„μ΄λ‹¤.

HTTPSμ μ›μ² κΈ°μ μ€ TLS μ „μ†΅ κΈ°μ μ΄λ‹¤. κ·ΈλΌ μ΄κ²ƒμ— λ€ν•΄ μ•μ•„λ³΄μ.

<br>

## β”οΈ  TCP μ—°κ²°μ λ³΄μ•: TLS

SSL ν”„λ΅ν† μ½, TLS ν”„λ΅ν† μ½ ν—·κ°λ¦΄μλ„ μλ‹¤.

SSL ν”„λ΅ν† μ½μ€ μ›λ λ„·μ¤μΌ€μ΄ν”„(Netscape)κ°€ κ³ μ•ν–λ‹¤. ν•μ§€λ§ λ„·μ¤μΌ€μ΄ν”„κ°€ SSL ν†µμ κ¶μ„ IETF[RFC 4346]λ΅ λ„κΈ°λ©΄μ„ TLSλ΅ ν‘μ¤€ν™”λμ—λ‹¤.

TLS ν”„λ΅ν† μ½μ€ SSL ν”„λ΅ν† μ½μ—μ„ λ°μ „ν• κ²ƒμΌλ΅ μ΄ν•΄ν•λ©΄ μΆ‹κ² λ‹¤.

### [ ν•„μ”μ„± μμ‹ : μΈν„°λ„· μƒκ±°λ ]

ν•„μ”μ„± μ„¤λ…μ„ μ„ν•΄ μΈν„°λ„·μ—μ„ λ¬Όκ±΄μ„ κµ¬λ§¤ν•λ” μƒν™©μ„ μλ΅ λ“¤μ–΄ μƒκ°ν•΄λ³΄μ.

```
μ£Όλ””κ°€ λ„¤μ¤ μ„ λ¬Όμ„ μ‚¬κΈ° μ„ν•΄ μΈν„°λ„· μ‡Όν•‘λ°μ„ κµ¬κ²½ν•λ‹¤.

π° μ£Όλ””: μ–΄? ν¬μ‹λ„¤ κ³Όμμ ? κ΄μ°®λ„¤ μ—¬κΈ°μ„ μ‚¬μ•Όκ² λ‹¤! μ£Όλ¬Έ λ²„νΌ ν΄λ¦­!

 ν¬μ‹λ„¤ κ³Όμμ μ€ κ³Όμ μΆ…λ¥, μλ‰, μ£Όμ†, μ‹ μ©μΉ΄λ“λ²νΈλ¥Ό μ…λ ¥ν•  μ–‘μ‹μ„ μ κ³µν•λ‹¤.
 
π° μ£Όλ””: μ •λ³΄ λ‹¤ μ…λ ¥ν–κ³  κµ¬λ§¤ μ™„λ£!

μ΄λ ‡κ² μ •λ³΄λ¥Ό μ „μ†΅ν•κ³  μ£Όλ””λ” κ³Όμ λ°°μ†΅μ„ κΈ°λ‹¤λ¦°λ‹¤
```

μ™„λ²½ν•κ² μ£Όλ¬Έμ΄ μ™„λ£λ κ²ƒ κ°™μ•„ λ³΄μΈλ‹¤. ν•μ§€λ§ μ΄ κ³Όμ •μ—μ„ λ³΄μ•μ΄ λμ–΄μμ§€ μ•λ‹¤λ©΄ λ‡ κ°€μ§€ μλ»λ μƒν™©μ΄ λ°μƒν•  μ μλ‹¤.

<br>

κ°„λ‹¨ν•κ² μ„¤λ…ν•λ©΄ **μ•μ „ν• ν†µμ‹ **μ—λ” 3κ°€μ§€ νΉμ„±μ΄ μ”κµ¬λλ‹¤.

1. `κΈ°λ°€μ„±` : μ†΅μ‹ μμ™€ μ§€μ •λ μμ‹ μλ§μ΄ μ „μ†΅λλ” λ©”μ‹μ§€ λ‚΄μ©μ„ μ΄ν•΄ν•  μ μμ–΄μ•Ό ν•λ‹¤.
2. `λ©”μ‹μ§€ λ¬΄κ²°μ„±` : ν†µμ‹ ν•λ” λ‚΄μ©μ΄ μ „μ†΅ λ„μ¤‘μ— λ³€κ²½λμ§€ μ•μ•„μ•Ό ν•λ‹¤.
3. `μΆ…λ‹¨μ  μΈμ¦` : μ†΅μ‹ μμ™€ μμ‹ μλ” ν†µμ‹ μ— μ°Έμ—¬ν•λ” μƒλ€λ°©μ΄ μ‹¤μ  λ„κµ¬μΈμ§€ ν™•μΈν•κΈ° μ„ν•΄ μƒλ€λ°©μ μ‹ μ›μ„ ν™•μΈν•  μ μμ–΄μ•Ό ν•λ‹¤.

<br>

μ΄ 3κ°€μ§€κ°€ μ§€μΌμ§€μ§€ μ•μ€ μƒν™©μ„ μ‚΄ν΄λ³΄μ.
 
1. `κΈ°λ°€μ„±(μ•”νΈν™”) X` : μΉ¨μ…μκ°€ μ£Όλ””κ°€ μ£Όλ¬Έν• λ‚΄μ©μ„ κ°€λ΅μ±„μ„ μ‹ μ©μΉ΄λ“ μ •λ³΄λ¥Ό μ–»μ„ μ μλ‹¤. μ΄ μΉ΄λ“λ” μ΄μ  μ  κ²λ‹λ‹¤. μΉ¨μ…μλ” μΉ΄λ“λ¥Ό λ“ν…ν–λ‹¤. 

<div align='center'>
    <img src="img/network_mine.jpeg" width="400px">
</div>

<br>

2. `λ©”μ‹μ§€(λ°μ΄ν„°) λ¬΄κ²°μ„± X` : μΉ¨μ…μκ°€ μ£Όλ””μ μ£Όλ¬Έ λ‚΄μ©μ„ μμ •ν•΄μ„ μ£Όλ¬Έ μλ‰μ 100λ°° λ„λ” κ³Όμλ¥Ό κµ¬λ§¤ν•λ„λ΅ ν•  μ μλ‹¤.

3. `μΆ…λ‹¨μ (μ„λ²„) μΈμ¦ X` : ν¬μ‹λ„¤ κ³Όμμ λ¥Ό κ°€μ¥ν• μ‚¬μ΄νΈλ¥Ό λ§λ“¤μ–΄ μ£Όλ””μ μ£Όλ¬Έμ„ λ°›κ³  λμ„ κ°€μ§€κ³  λ‹¬μ•„λ‚  μ μλ‹¤. λν• μ£Όλ””κ°€ μ…λ ¥ν• μ •λ³΄λ„ κ°€μ§€κ³  λ‹¬μ•„λ‚λ‹¤.

TLSλ” μ΄λ¬ν• μ„ν—μ„ μ—†μ• κ³  TCPλ¥Ό ν–¥μƒν•¨μΌλ΅μ¨ λ¬Έμ λ¥Ό ν•΄κ²°ν•λ‹¤.

<div align='center'>
    <img src="img/network_tcp_tls.png" width="450px">
</div>

<br>

## β”οΈ μ•”νΈν™” λ°©μ‹

### 1. λ€μΉ­ν‚¤ μ•”νΈν™”

> μ•”νΈν™”λ¥Ό ν•  λ•μ™€ λ³µνΈν™”λ¥Ό ν•  λ• **κ°™μ€ μ•”νΈν‚¤**λ¥Ό μ‚¬μ©ν•λ” μ•κ³ λ¦¬μ¦

λ€μΉ­ν‚¤ μ•”νΈν™” λ°©μ‹μ€ λ€λ¬Έμ μ—΄μ‡ μ™€ κ°™λ‹¤. μλ¬Όμ‡ λ¥Ό μ κ·Ό μ—΄μ‡  λ§μΌλ΅ κ·Έ μλ¬Όμ‡ λ¥Ό λ‹¤μ‹ μ—΄ μ μλ‹¤.

ν•μ§€λ§ κ·Έ ν‚¤λ¥Ό μƒμ–΄λ²„λ¦°λ‹¤λ©΄ λ„κµ°μ§€ λ¨λ¥΄λ” μ‚¬λμ΄ μ°λ¦¬ μ§‘μ— λ¬Έμ„ μ—΄ μ μμΌλ‹ μ„ν—ν•λ‹¤!

### 2. κ³µκ°ν‚¤ μ•”νΈν™”

> λ©”μ‹μ§€ μ•”νΈν™” ν•λ” ν‚¤μ™€ λ³µνΈν™” ν•λ” **ν‚¤κ°€ λ‹¤λ¥Έ** μ•κ³ λ¦¬μ¦ (κ³µκ°ν‚¤μ™€ λΉ„κ³µκ°ν‚¤)

λ‘ κ°μ ν‚¤λ¥Ό κ°€μ§„λ‹¤. μ΄κ²ƒμ„ <u>ν‚¤νμ–΄(key pair)</u>λΌκ³  λ¶€λ¥Έλ‹¤.

1. **κ³µκ°ν‚¤** (public key)
2. **λΉ„κ³µκ°ν‚¤** = κ°μΈν‚¤ = λΉ„λ°€ν‚¤ (private key)

<br>

μ£Όλ””κ°€ λ„¤μ¤μ™€ ν†µμ‹ ν•λ” κ³Όμ •μ„ μ²μ²ν μ‚΄ν΄λ³΄μ.

```
λ„¤μ¤λ” ν‚¤κ°€ λ‘κ°€μ§€ μλ‹¤. ν• κ°€μ§€λ” μ„Έμƒμ λ¨λ“  μ‚¬λμ—κ² μ•λ ¤μ§„ κ³µκ°ν‚¤(public key)(KB+)μ΄κ³ , λ‹¤λ¥Έ ν•λ‚λ” λ„¤μ¤λ§ μ•„λ” λΉ„λ°€ν‚¤(private key)(KB-)μ΄λ‹¤.

1. μ£Όλ””λ” λ„¤μ¤μ—κ² λ³΄λ‚Ό m λ©”μ‹μ§€λ¥Ό κ³µκ°ν‚¤λ΅ μ•”νΈν™”ν•λ‹¤. KB+(m)
2. μ•”νΈλ¬Έμ„ λ°›μ€ λ„¤μ¤λ” μμ‹ μ΄ κ°€μ‹  λΉ„λ°€ν‚¤λ΅ λ³µνΈν™”ν•λ‹¤. m = KB-(KB+(m))
```

μ΄ λ°©λ²•μΌλ΅ <u>λΉ„λ°€ν‚¤λ¥Ό λ‚λ κ°€μ§ ν•„μ”μ—†μ΄ μ£Όλ””λ” **λ„¤μ¤μ κ³µκ°ν‚¤**λ¥Ό κ°€μ§€κ³  μ™€μ„ λΉ„λ°€ λ©”μ‹μ§€λ¥Ό λ³΄λ‚Ό μ μλ‹¤.</u>

κ·Έλ¦¬κ³  κ·Έ λ©”μ‹μ§€λ” λ„¤μ¤λ§μ΄ λ³µνΈν™”ν•΄μ„ μ—΄μ–΄λ³Ό μ μλ‹¤.

<div align='center'>
    <img src="img/network_public_key.png" width="550px">
    <p>μΆ: μ£Όλ””, μ°: λ„¤μ¤</p>
</div>

<br>

### β”οΈ  TLS  ν•Έλ“μ…°μ΄ν¬(handshake)

TLSλ¥Ό μ–΄λ–»κ² μ‚¬μ©ν•λ”μ§€ ν° κ·Έλ¦Όμ„ μ΄ν•΄ν•κΈ° μ„ν•΄μ„ μ•„λ λ‹¨μν™”λ κ·Έλ¦ΌμΌλ΅ μ‚΄ν΄λ³΄μ. 

μ΄ κ³Όμ •μ€ μ„Έ λ‹¨κ³„λ΅ λ‚λ μ Έ μλ‹¤. ν΄λΌμ΄μ–ΈνΈ(λ„¤μ¤)μ™€ μ„λ²„(μ£Όλ””)μ ν†µμ‹ μ„ μ‚΄ν΄λ³΄μ.

```
1. ν•Έλ“μ…°μ΄ν¬(handshake)
2. ν‚¤ μ λ„(key derivation)
3. λ°μ΄ν„° μ „μ†΅(data transfer)
```

μ„λ²„(μ£Όλ””)λ” κ°μΈν‚¤, κ³µκ°ν‚¤λ¥Ό κ°€μ§€κ³  μμΌλ©° μ‹ λΆ°ν•  μ μλ” CA κΈ°μ—…μ— κ³µκ°ν‚¤ κ΄€λ¦¬λ¥Ό λ¶€νƒν•λ©° κ³„μ•½μ„ ν•λ‹¤.

\* CA(Certificate Authority) : κ³µκ°ν‚¤λ¥Ό μ €μ¥ν•΄μ£Όλ” μ‹ λΆ°μ„±μ΄ κ²€μ¦λ λ―Όκ°„κΈ°μ—…

```
a) TCP μ—°κ²°μ„ μ„¤λ¦½ν•λ‹¤.

b) μ—°κ²°μ΄ μ„¤λ¦½λλ©΄ ν΄λΌμ΄μ–ΈνΈλ” ν—¬λ΅(hello)λ©”μ„Έμ§€λ¥Ό λ³΄λ‚΄κ³ , μ„λ²„λ” κ³µκ°ν‚¤λ¥Ό λ‹΄μ€ μΈμ¦μ„λ΅ μ‘λ‹µν•λ‹¤.

(μ΄λ• μΈμ¦μ„λ” CA μΈμ¦μ„ λ°›μ•κΈ° λ•λ¬Έμ—, ν΄λΌμ΄μ–ΈνΈλ” μΈμ¦μ„ λ‚΄ κ³µκ°ν‚¤κ°€ μ„λ²„(μ£Όλ””)μ κ²ƒμ΄λΌλ” κ²ƒμ„ μ‹ λΆ°ν•  μ μλ‹¤.)

c) ν΄λΌμ΄μ–ΈνΈλ” MS(Master Secret)μ„ μ„λ²„(μ£Όλ””)μ κ³µκ°ν‚¤λ΅ μ•”νΈν™”ν•μ—¬ λ³΄λ‚΄λ©΄, μ„λ²„λ” κ°μΈν‚¤λ΅ λ³µνΈν™”ν•λ‹¤.
```

TLS ν•Έλ“μ…°μ΄ν¬ κ³Όμ •μ΄ λλ‚κ³  HTTPS ν†µμ‹ μ„ μ‹μ‘ν•©λ‹λ‹¤.

<div align='center'>
    <img src="img/network_almost_tls_handshake.png" width="550px">
    <p>μΆ: ν΄λΌμ΄μ–ΈνΈ λ„¤μ¤, μ°: μ„λ²„ μ£Όλ””</p>
</div>

<br>

μ΄ κ³Όμ •μ—μ„ TLS μΈμ¦μ„μ—λ” λ€μΉ­ν‚¤ λ°©μ‹κ³Ό κ³µκ°ν‚¤ λ°©μ‹ λ¨λ‘ μ‚¬μ©ν•λ‹¤. λ¨λ“  κ²ƒμ„ κ³µκ°ν‚¤ λ°©μ‹μΌλ΅ ν•λ‹¤λ©΄ μ›Ή μ„λ²„μ™€ λΈλΌμ°μ €μ— λ§μ€ λ¶€λ‹΄μ΄ λλ‹¤. κ·Έλμ„ TLS ν•Έλ“μ…°μ΄ν¬ κ³Όμ •μ€ κ³µκ°ν‚¤ λ°©μ‹, κ·Έ μ΄ν›„μ HTTPS ν†µμ‹ μ€ λ€μΉ­ν‚¤ λ°©μ‹μ„ μ‚¬μ©ν•λ‹¤.

<br>

---

### π“Ά κ°™μ΄ κ³µλ¶€ν•λ©΄ μΆ‹μ„ λ©΄μ ‘ μ§λ¬Έ
- HTTPSμ— λ€ν•΄μ„ μ„¤λ…ν•κ³  SSL(TLS) Handshakeμ— λ€ν•΄μ„ μ„¤λ…ν•΄λ³΄μ„Έμ”.
- λ€μΉ­ν‚¤, λΉ„λ€μΉ­ν‚¤ μ•”νΈν™” λ°©μ‹μ— λ€ν•΄ μ„¤λ…ν•΄μ£Όμ„Έμ”.
- HTTPμ™€ HTTPSμ μ°¨μ΄λ¥Ό μ„¤λ…ν•΄λ³΄κ³ , HTTPλ¥Ό μ‚¬μ©ν•λ” REST API μ„λ²„μ—κ² HTTPSλ¥Ό μ‚¬μ©ν•κ² ν•κΈ° μ„ν•΄μ„λ” μ–΄λ– ν• μ μ°¨λ¥Ό κ±°μ³μ•Ό ν•λ”μ§€ μ•„λ” λ€λ΅ μ„¤λ…ν•΄λ³΄μ„Έμ”.

<br>

---

### π“ Reference

- James F. Kurose, Keith W. Ross, γ€μ»΄ν“¨ν„° λ„¤νΈμ›ν‚Ή ν•ν–¥μ‹ μ ‘κ·Όγ€, μµμΆ…μ› μ®κΉ€, νΌμ¤νΈλ¶(2022), p584~590.
